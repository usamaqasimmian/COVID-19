<!DOCTYPE html>
<html>
<head>
	<link rel="icon" href="https://image.flaticon.com/icons/svg/2659/2659991.svg">
	<img src = "https://i.ibb.co/N1wQ4fm/virus.png" style="width: 50%;">
	<br>
	<select id="country" name="country">
		<option value="Afghanistan">Afghanistan</option>
		<option value="Albania">Albania</option>
		<option value="Algeria">Algeria</option>
		<option value="American Samoa">American Samoa</option>
		<option value="Andorra">Andorra</option>
		<option value="Angola">Angola</option>
		<option value="Anguilla">Anguilla</option>
		<option value="Antigua and Barbuda">Antigua and Barbuda</option>
		<option value="Argentina">Argentina</option>
		<option value="Armenia">Armenia</option>
		<option value="Aruba">Aruba</option>
		<option value="Australia">Australia</option>
		<option value="Austria">Austria</option>
		<option value="Azerbaijan">Azerbaijan</option>
		<option value="Bahamas">Bahamas</option>
		<option value="Bahrain">Bahrain</option>
		<option value="Bangladesh">Bangladesh</option>
		<option value="Barbados">Barbados</option>
		<option value="Belarus">Belarus</option>
		<option value="Belgium">Belgium</option>
		<option value="Belize">Belize</option>
		<option value="Benin">Benin</option>
		<option value="Bermuda">Bermuda</option>
		<option value="Bhutan">Bhutan</option>
		<option value="Bolivia">Bolivia</option>
		<option value="Bonaire">Bonaire</option>
		<option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
		<option value="Botswana">Botswana</option>
		<option value="Brazil">Brazil</option>
		<option value="British Indian Ocean Ter">British Indian Ocean Territory</option>
		<option value="Brunei">Brunei</option>
		<option value="Bulgaria">Bulgaria</option>
		<option value="Burkina Faso">Burkina Faso</option>
		<option value="Burundi">Burundi</option>
		<option value="Cambodia">Cambodia</option>
		<option value="Cameroon">Cameroon</option>
		<option value="Canada">Canada</option>
		<option value="Canary Islands">Canary Islands</option>
		<option value="Cape Verde">Cape Verde</option>
		<option value="Cayman Islands">Cayman Islands</option>
		<option value="Central African Republic">Central African Republic</option>
		<option value="Chad">Chad</option>
		<option value="Channel Islands">Channel Islands</option>
		<option value="Chile">Chile</option>
		<option value="China">China</option>
		<option value="Christmas Island">Christmas Island</option>
		<option value="Cocos Island">Cocos Island</option>
		<option value="Colombia">Colombia</option>
		<option value="Comoros">Comoros</option>
		<option value="Congo">Congo</option>
		<option value="Cook Islands">Cook Islands</option>
		<option value="Costa Rica">Costa Rica</option>
		<option value="Cote DIvoire">Cote DIvoire</option>
		<option value="Croatia">Croatia</option>
		<option value="Cuba">Cuba</option>
		<option value="Curaco">Curacao</option>
		<option value="Cyprus">Cyprus</option>
		<option value="Czech Republic">Czech Republic</option>
		<option value="Denmark">Denmark</option>
		<option value="Djibouti">Djibouti</option>
		<option value="Dominica">Dominica</option>
		<option value="Dominican Republic">Dominican Republic</option>
		<option value="East Timor">East Timor</option>
		<option value="Ecuador">Ecuador</option>
		<option value="Egypt">Egypt</option>
		<option value="El Salvador">El Salvador</option>
		<option value="Equatorial Guinea">Equatorial Guinea</option>
		<option value="Eritrea">Eritrea</option>
		<option value="Estonia">Estonia</option>
		<option value="Ethiopia">Ethiopia</option>
		<option value="Falkland Islands">Falkland Islands</option>
		<option value="Faroe Islands">Faroe Islands</option>
		<option value="Fiji">Fiji</option>
		<option value="Finland">Finland</option>
		<option value="France">France</option>
		<option value="French Guiana">French Guiana</option>
		<option value="French Polynesia">French Polynesia</option>
		<option value="French Southern Ter">French Southern Ter</option>
		<option value="Gabon">Gabon</option>
		<option value="Gambia">Gambia</option>
		<option value="Georgia">Georgia</option>
		<option value="Germany">Germany</option>
		<option value="Ghana">Ghana</option>
		<option value="Gibraltar">Gibraltar</option>
		<option value="Great Britain">Great Britain</option>
		<option value="Greece">Greece</option>
		<option value="Greenland">Greenland</option>
		<option value="Grenada">Grenada</option>
		<option value="Guadeloupe">Guadeloupe</option>
		<option value="Guam">Guam</option>
		<option value="Guatemala">Guatemala</option>
		<option value="Guinea">Guinea</option>
		<option value="Guyana">Guyana</option>
		<option value="Haiti">Haiti</option>
		<option value="Honduras">Honduras</option>
		<option value="Hong Kong">Hong Kong</option>
		<option value="Hungary">Hungary</option>
		<option value="Iceland">Iceland</option>
		<option value="Indonesia">Indonesia</option>
		<option value="India">India</option>
		<option value="Iran">Iran</option>
		<option value="Iraq">Iraq</option>
		<option value="Ireland">Ireland</option>
		<option value="Isle of Man">Isle of Man</option>
		<option value="Israel">Israel</option>
		<option value="Italy">Italy</option>
		<option value="Jamaica">Jamaica</option>
		<option value="Japan">Japan</option>
		<option value="Jordan">Jordan</option>
		<option value="Kazakhstan">Kazakhstan</option>
		<option value="Kenya">Kenya</option>
		<option value="Kiribati">Kiribati</option>
		<option value="Kuwait">Kuwait</option>
		<option value="Kyrgyzstan">Kyrgyzstan</option>
		<option value="Laos">Laos</option>
		<option value="Latvia">Latvia</option>
		<option value="Lebanon">Lebanon</option>
		<option value="Lesotho">Lesotho</option>
		<option value="Liberia">Liberia</option>
		<option value="Libya">Libya</option>
		<option value="Liechtenstein">Liechtenstein</option>
		<option value="Lithuania">Lithuania</option>
		<option value="Luxembourg">Luxembourg</option>
		<option value="Macau">Macau</option>
		<option value="Macedonia">Macedonia</option>
		<option value="Madagascar">Madagascar</option>
		<option value="Malaysia">Malaysia</option>
		<option value="Malawi">Malawi</option>
		<option value="Maldives">Maldives</option>
		<option value="Mali">Mali</option>
		<option value="Malta">Malta</option>
		<option value="Marshall Islands">Marshall Islands</option>
		<option value="Martinique">Martinique</option>
		<option value="Mauritania">Mauritania</option>
		<option value="Mauritius">Mauritius</option>
		<option value="Mayotte">Mayotte</option>
		<option value="Mexico">Mexico</option>
		<option value="Midway Islands">Midway Islands</option>
		<option value="Moldova">Moldova</option>
		<option value="Monaco">Monaco</option>
		<option value="Mongolia">Mongolia</option>
		<option value="Republic of Montenegro">Montenegro</option>
		<option value="Montserrat">Montserrat</option>
		<option value="Morocco">Morocco</option>
		<option value="Mozambique">Mozambique</option>
		<option value="Myanmar">Myanmar</option>
		<option value="Namibia">Namibia</option>
		<option value="Nauru">Nauru</option>
		<option value="Nepal">Nepal</option>
		<option value="Netherland Antilles">Netherland Antilles</option>
		<option value="Netherlands">Netherlands</option>
		<option value="Nevis">Nevis</option>
		<option value="New Caledonia">New Caledonia</option>
		<option value="New Zealand">New Zealand</option>
		<option value="Nicaragua">Nicaragua</option>
		<option value="Niger">Niger</option>
		<option value="Nigeria">Nigeria</option>
		<option value="Niue">Niue</option>
		<option value="Norfolk Island">Norfolk Island</option>
		<option value="Korea North">North Korea</option>
		<option value="Norway">Norway</option>
		<option value="Oman">Oman</option>
		<option value="Pakistan">Pakistan</option>
		<option value="Palau Island">Palau Island</option>
		<option value="Palestine">Palestine</option>
		<option value="Panama">Panama</option>
		<option value="Papua New Guinea">Papua New Guinea</option>
		<option value="Paraguay">Paraguay</option>
		<option value="Peru">Peru</option>
		<option value="Phillipines">Philippines</option>
		<option value="Pitcairn Island">Pitcairn Island</option>
		<option value="Poland">Poland</option>
		<option value="Portugal">Portugal</option>
		<option value="Puerto Rico">Puerto Rico</option>
		<option value="Qatar">Qatar</option>
		<option value="Reunion">Reunion</option>
		<option value="Romania">Romania</option>
		<option value="Russia">Russia</option>
		<option value="Rwanda">Rwanda</option>
		<option value="St Barthelemy">St Barthelemy</option>
		<option value="St Eustatius">St Eustatius</option>
		<option value="St Helena">St Helena</option>
		<option value="St Kitts-Nevis">St Kitts-Nevis</option>
		<option value="St Lucia">St Lucia</option>
		<option value="St Maarten">St Maarten</option>
		<option value="St Pierre and Miquelon">St Pierre and Miquelon</option>
		<option value="St Vincent and Grenadines">St Vincent and Grenadines</option>
		<option value="Saipan">Saipan</option>
		<option value="Samoa">Samoa</option>
		<option value="Samoa American">Samoa American</option>
		<option value="San Marino">San Marino</option>
		<option value="Sao Tome & Principe">Sao Tome and Principe</option>
		<option value="Saudi Arabia">Saudi Arabia</option>
		<option value="Senegal">Senegal</option>
		<option value="Republic of Serbia">Serbia</option>
		<option value="Seychelles">Seychelles</option>
		<option value="Sierra Leone">Sierra Leone</option>
		<option value="Singapore">Singapore</option>
		<option value="Slovakia">Slovakia</option>
		<option value="Slovenia">Slovenia</option>
		<option value="Solomon Islands">Solomon Islands</option>
		<option value="Somalia">Somalia</option>
		<option value="South Africa">South Africa</option>
		<option value="Korea South">South Korea</option>
		<option value="Spain">Spain</option>
		<option value="Sri Lanka">Sri Lanka</option>
		<option value="Sudan">Sudan</option>
		<option value="Suriname">Suriname</option>
		<option value="Swaziland">Swaziland</option>
		<option value="Sweden">Sweden</option>
		<option value="Switzerland">Switzerland</option>
		<option value="Syria">Syria</option>
		<option value="Tahiti">Tahiti</option>
		<option value="Taiwan">Taiwan</option>
		<option value="Tajikistan">Tajikistan</option>
		<option value="Tanzania">Tanzania</option>
		<option value="Thailand">Thailand</option>
		<option value="Togo">Togo</option>
		<option value="Tokelau">Tokelau</option>
		<option value="Tonga">Tonga</option>
		<option value="Trinidad and Tobago">Trinidad and Tobago</option>
		<option value="Tunisia">Tunisia</option>
		<option value="Turkey">Turkey</option>
		<option value="Turkmenistan">Turkmenistan</option>
		<option value="Turks and Caicos Islands">Turks and Caicos Is</option>
		<option value="Tuvalu">Tuvalu</option>
		<option value="Uganda">Uganda</option>
		<option value="United Kingdom">United Kingdom</option>
		<option value="Ukraine">Ukraine</option>
		<option value="United Arab Erimates">United Arab Emirates</option>
		<option value="United States of America">United States of America</option>
		<option value="Uraguay">Uruguay</option>
		<option value="Uzbekistan">Uzbekistan</option>
		<option value="Vanuatu">Vanuatu</option>
		<option value="Vatican City State">Vatican</option>
		<option value="Venezuela">Venezuela</option>
		<option value="Vietnam">Vietnam</option>
		<option value="Virgin Islands">Virgin Islands (Brit)</option>
		<option value="Virgin Islands (USA)">Virgin Islands (USA)</option>
		<option value="Wake Island">Wake Island</option>
		<option value="Wallis and Futana">Wallis and Futana</option>
		<option value="Yemen">Yemen</option>
		<option value="Zaire">Democratic Republic of the Congo</option>
		<option value="Zambia">Zambia</option>
		<option value="Zimbabwe">Zimbabwe</option>
	</select>
	<button id='Run'>Go</button>
	<button id='Summary'>Get Summary</button>
	<button id='WorldMap'>World Map</button>
	<button id='CompleteList'>Complete List</button>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="style.css">
</head>
<br>
<body>
	<div class="tab" id="tabs" style="display:none;">
		<button class="tablinks active" id="default" onclick="getConfirmed()">New Cases</button>
		<button class="tablinks " id="second" onclick="getDeaths()">New Deaths</button>
		<button class="tablinks " id="third" onclick="getRecovered()">Recovered</button>
	</div>

	<div id="New" class="tabcontent">
		<h3>New Cases</h3>
	</div>

	<div id="Deaths" class="tabcontent">
		<h3>New Deaths</h3>
	</div>
	<div id="Deaths" class="tabcontent">
		<h3>Recovered</h3>
	</div>
	<br>
	<img id="image">
	</img>
	<div id="curve_chart"></div>
	</div>
	<br>
	<div id="total" style="display: none; text-align: center;font-size:larger;"></div>
	<div id="regions_div2" style="width: 1200px; height: 700px; display: none;"></div>
	<div id="permillion"style="display: none; text-align: center; font-size:larger;"></div>
	<div id="regions_div" style="width: 1200px; height: 700px; display:none;"></div>
	<div id="barchart_1" style="width: 900px; height: 500px; display:none"></div>
	<div id="barchart_2" style="width: 900px; height: 500px;display:none;"></div>
	<div id="barchart_3" style="width: 900px; height: 500px;display:none;"></div>
	<div id="table_div2" style="display: none;"></div>
	<p class="c">
	<div id="table_div"></div>
	</p>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script>
        google.charts.load('current', {
    'packages': ['geochart'],
    'mapsApiKey': 'AIzaSyC45EW_eQtxFPymimvAVP6DkSKFbfw9LCA'
});

google.charts.load('current', { 'packages': ['corechart'] });
google.charts.load('current', { 'packages': ['table'] });
window.onload = function () {
    const Run = document.getElementById('Run');
    Run.addEventListener("click", start);
    Summary.addEventListener("click", second);
    WorldMap.addEventListener("click", Third);
    CompleteList.addEventListener("click", fourth);

}

async function fourth(){
    document.getElementById('table_div2').style.display = "block";
    document.getElementById('barchart_1').style.display = "none";
    document.getElementById('barchart_2').style.display = "none";
    document.getElementById('barchart_3').style.display = "none";
    document.getElementById('table_div').style.display = "none";
    document.getElementById('tabs').style.display = "none";
    document.getElementById('regions_div').style.display = "none";
    document.getElementById('regions_div2').style.display = "none";
    document.getElementById('curve_chart').style.display = "none";
    document.getElementById('myOutputPlace').style.display = "none";
    document.getElementById('total').style.display = "none";
    document.getElementById('permillion').style.display = "none";
    document.getElementById("image").src = "";
    var url = "https://api.covid19api.com/summary"
    var totalCovidData = await fetch(url)
    var covid19 = await totalCovidData.json();
    var complete = []
    for (let i = 0; i < covid19.Countries.length; i++) {
        country = [covid19.Countries[i].Country, covid19.Countries[i].TotalConfirmed, covid19.Countries[i].TotalDeaths,covid19.Countries[i].TotalRecovered]
        complete.push(country)
}
complete.sort(compareSecondColumn);

var data = new google.visualization.DataTable();
data.addColumn('string', 'Country');
data.addColumn('number', 'Total Confirmed Cases');
data.addColumn('number', 'Total Deaths ');
data.addColumn('number', 'Total Recovered');



            data.addRows(complete);

            var table = new google.visualization.Table(document.getElementById('table_div2'));

            table.draw(data, { showRowNumber: true, allowHTML: true});
}
async function Third() {
    document.getElementById('total').style.display = "block";
    document.getElementById('permillion').style.display = "block";
    document.getElementById('table_div2').style.display = "none";
    document.getElementById('barchart_1').style.display = "none";
    document.getElementById('barchart_2').style.display = "none";
    document.getElementById('barchart_3').style.display = "none";
    document.getElementById('table_div').style.display = "none";
    document.getElementById('tabs').style.display = "none";
    document.getElementById('regions_div').style.display = "inline-block";
    document.getElementById('regions_div2').style.display = "inline-block";
    document.getElementById('curve_chart').style.display = "none";
    document.getElementById('myOutputPlace').style.display = "none";
    document.getElementById("image").src = "";
    var url = "https://api.covid19api.com/summary"
    var totalCovidData = await fetch(url)
    var covid19 = await totalCovidData.json();
    let maps = [["Country", "Number of Cases per million"]]
    let overall = [["Country", "Number of Cases"]]
    for (let i = 0; i < covid19.Countries.length; i++) {
        var countryCode = await fetch("https://restcountries.eu/rest/v2/alpha/" + covid19.Countries[i].CountryCode);
        var countryData = await countryCode.json();
        let pop = countryData.population;
        let name = countryData.name
        if (name == "United States of America") {
            name = "United States"
        }
        else if (name == "Russian Federation") {
            name = "Russia"
        }

        else if (name == "United Kingdom of Great Britain and Northern Ireland") {
            name = "United Kingdom"
        }

        else if (name == "Iran (Islamic Republic of)") {
            name = "Iran"
        }

        else if (name == "Tanzania, United Republic of") {
            name = "Tanzania"
        }

        else if (name == "Korea (Republic of)") {
            name = "South Korea"
        }

        else if (name == "Viet Nam") {
            name = "Vietnam"
        }

        else if (name == "Venezuela (Bolivarian Republic of)") {
            name = "Venezuela"
        }

        else if (name == "Lao People's Democratic Republic") {
            name = "Laos"
        }

        else if (name == "Bolivia (Plurinational State of)") {
            name = "Bolivia"
        }

        else if (name == "Côte d'Ivoire") {
            name = "CIV"
        }

        else if (name == "Korea (Democratic People's Republic of)") {
            name = "KP"
        }

        else if (name == "Congo (Democratic Republic of the)") {
            name = "CD"
        }

        else if (name == "Congo") {
            name = "CG"
        }
        else if (name == "South Sudan") {
            name = "SS"
        }
        pop = pop / 1000000
        let percapita = covid19.Count
        let total = covid19.Countries[i].TotalConfirmed
        percapita = covid19.Countries[i].TotalConfirmed / pop
        percapita = parseFloat(percapita.toFixed(2))
        geo = [name, percapita];
        total = [name, total]
        overall.push(total)
        maps.push(geo)
    }

    var data = google.visualization.arrayToDataTable(maps);
    var options = {
        colorAxis: { minValue: 0, maxValue: 10000 },
    };
    var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

    chart.draw(data, options);

    var data = google.visualization.arrayToDataTable(overall);
    var options = {
        colorAxis: { minValue: 0, maxValue: 500000, colors: ["#E5D1E3", "#871F78"] },
    };
    var chart = new google.visualization.GeoChart(document.getElementById('regions_div2'));

    chart.draw(data, options);

    message = document.getElementById("total");
    message.innerHTML = "";
    message.innerHTML = "Total Cases";

    message = document.getElementById("permillion");
    message.innerHTML = "";
    message.innerHTML = "Cases per Million";
}


async function second() {
    document.getElementById('total').style.display = "none";
    document.getElementById('permillion').style.display = "none";
    document.getElementById('table_div2').style.display = "none";
    document.getElementById('regions_div2').style.display = "none";
    document.getElementById('myOutputPlace').style.display = "none";
    document.getElementById('barchart_1').style.display = "block";
    document.getElementById('barchart_2').style.display = "block";
    document.getElementById('barchart_3').style.display = "block";
    document.getElementById('tabs').style.display = "none";
    document.getElementById('curve_chart').style.display = "none";
    document.getElementById('table_div').style.display = "none";
    document.getElementById('regions_div').style.display = "none";
    document.getElementById("image").src = "";
    var url = "https://api.covid19api.com/summary"
    var totalCovidData = await fetch(url)
    var covid19 = await totalCovidData.json();
    let total = []
    let total_deaths = []
    let fatality_rate = []
    let global_recovery = covid19.Global.TotalConfirmed;
    let global_deaths = covid19.Global.TotalDeaths;
    let global_cases = covid19.Global.TotalConfirmed;

    for (let i = 0; i < covid19.Countries.length; i++) {
        country = [covid19.Countries[i].Country, covid19.Countries[i].TotalConfirmed]
        deaths = [covid19.Countries[i].Country, covid19.Countries[i].TotalDeaths]
        recovered = [covid19.Countries[i].Country, (covid19.Countries[i].TotalDeaths / covid19.Countries[i].TotalConfirmed) * 100]
        recovered[1] = parseFloat(recovered[1].toFixed(2))
        total.push(country)
        total_deaths.push(deaths)
        fatality_rate.push(recovered)
    }
    total.sort(compareSecondColumn);
    top10 = total.slice(0, 9)
    tosubtract = 0
    for (let i = 0; i < top10.length; i++) {
        tosubtract = tosubtract + top10[i][1];
    }
    global_cases = global_cases - tosubtract;

    top10.unshift(["Country", "Total Cases"])
    top10.push(["Others", global_cases])

    var data = google.visualization.arrayToDataTable(top10);

    var options = {
        title: 'Covid-19 Highest Cases',
        is3D: true,

    };

    var chart = new google.visualization.BarChart(document.getElementById('barchart_1'));

    chart.draw(data, options);



    fatality_rate.sort(compareSecondColumn);
    top10 = fatality_rate.slice(0, 9)
    top10.unshift(["Country", "Fatality Rate"])
    global_recovery = (global_deaths / global_recovery) * 100
    global_recovery = global_recovery.toFixed(2)
    top10.push(["Global", global_recovery])

    var data = google.visualization.arrayToDataTable(top10);

    var options = {
        title: 'Covid-19 Highest Fatality Rate (%)',
        is3D: true,
        colors: ['#696969']
    };

    var chart = new google.visualization.BarChart(document.getElementById('barchart_3'));

    chart.draw(data, options);

    total_deaths.sort(compareSecondColumn)
    top10 = total_deaths.slice(0, 9)

    tosubtract = 0
    for (let i = 0; i < top10.length; i++) {
        tosubtract = tosubtract + top10[i][1];
    }
    global_deaths = global_deaths - tosubtract;

    top10.unshift(["Country", "Total Deaths"])
    top10.push(["Others", global_deaths])
    var data = google.visualization.arrayToDataTable(top10);

    var options = {
        title: 'Covid-19 Highest Deaths',
        is3D: true,
        colors: ['#FF6347']

    };

    var chart = new google.visualization.BarChart(document.getElementById('barchart_2'));

    chart.draw(data, options);

}
function compareSecondColumn(a, b) {
    if (a[1] === b[1]) {
        return 0;
    }
    else {
        return (a[1] > b[1]) ? -1 : 1;
    }
}

function start() {
    var div = document.getElementById("curve_chart")
    while (div.firstChild) {
        div.removeChild(div.firstChild)
    };
    var div = document.getElementById("myOutputPlace")
    while (div.firstChild) {
        div.removeChild(div.firstChild)
    };
    var div = document.getElementById("table_div")
    while (div.firstChild) {
        div.removeChild(div.firstChild)
    };
    var div = document.getElementById("barchart_1")
    while (div.firstChild) {
        div.removeChild(div.firstChild)
    };
    var div = document.getElementById("barchart_2")
    while (div.firstChild) {
        div.removeChild(div.firstChild)
    };
    var div = document.getElementById("barchart_3")
    while (div.firstChild) {
        div.removeChild(div.firstChild)
    };
    var div = document.getElementById("regions_div")
    while (div.firstChild) {
        div.removeChild(div.firstChild)
    };
    document.getElementById('table_div2').style.display = "none";
    document.getElementById('regions_div2').style.display = "none";
    document.getElementById('barchart_1').style.display = "none";
    document.getElementById('barchart_2').style.display = "none";
    document.getElementById('barchart_3').style.display = "none";
    document.getElementById('curve_chart').style.display = "block";
    document.getElementById('table_div').style.display = "block";
    document.getElementById('regions_div').style.display = "none";
    document.getElementById("image").src = "";
    document.getElementById('tabs').style.display = "inline-block";
    document.getElementById('total').style.display = "none";
    document.getElementById('permillion').style.display = "none";
    document.getElementById('myOutputPlace').style.display = "block";
    getConfirmed();
}
async function getConfirmed() {

    document.getElementById('default').className = "tablinks active";
    document.getElementById('second').className = "tablinks";
    document.getElementById('third').className = "tablinks";
    var e = document.getElementById("country");
    var country = e.options[e.selectedIndex].text;
    var myDataArray = [["Date", "New Cases"]]
    try {
        var url = "https://api.covid19api.com/total/country/" + country + "/status/confirmed"
        var totalCovidData = await fetch(url)
        var covid19 = await totalCovidData.json();
        var totalConfirmed = covid19[covid19.length - 1].Cases
        myDataArray = [["Date", "New Cases"]]
        totalConfirmed = covid19[covid19.length - 1].Cases
        for (let i = 0; i < covid19.length; i++) {
            var date = covid19[i].Date
            date = date.substring(0, 10);
            if (i == 0) {
                var confirmed = covid19[0].Cases
                myDataArray.push([date, confirmed])
            }

            else {
                var confirmed = covid19[i].Cases - covid19[i - 1].Cases
                if (confirmed < 0) {
                    //pass
                }
                else {
                    myDataArray.push([date, confirmed])
                }
            }
        }
    }
    catch (err) {
        console.log(err)
    }

    if (myDataArray.length == 1) {
        message = document.getElementById("myOutputPlace");
        message.innerHTML = "";
        message.innerHTML = "No Data available for " + country;
        document.getElementById("image").src = "";

        var div = document.getElementById("curve_chart")
        while (div.firstChild) {
            div.removeChild(div.firstChild)
        };

        var div = document.getElementById("table_div")
        while (div.firstChild) {
            div.removeChild(div.firstChild)
        };
    }

    else {

        var data = google.visualization.arrayToDataTable(myDataArray);
        var options = {
            title: 'Covid 19 Cases for ' + country,
            legend: { position: 'bottom' },
        };

        url = "https://api.covid19api.com/total/country/" + country + "/status/deaths"
        totalCovidData = await fetch(url)
        covid19 = await totalCovidData.json();
        totalDeaths = covid19[covid19.length - 1].Cases
        url = "https://api.covid19api.com/total/country/" + country + "/status/recovered"
        totalCovidData = await fetch(url)
        covid19 = await totalCovidData.json();
        totalRecovered = covid19[covid19.length - 1].Cases
        var countryCode = await fetch("https://restcountries.eu/rest/v2/name/" + country);
        var countryData = await countryCode.json();
        var population;
        if (country == "India") {
            code = countryData[1].alpha2Code;
            population = countryData[1].population;

        }

        else if (country == "South Korea") {
            code = "KR"
            population = 51273775
        }
        else {
            code = countryData[0].alpha2Code;
            population = countryData[0].population;

        }

        population = population / 1000000

        var casespermillion = totalConfirmed / population;
        var deathspermillion = totalDeaths / population;

        casespermillion = casespermillion.toFixed(2);
        deathspermillion = deathspermillion.toFixed(2);

        var totalPercentage = (totalRecovered / totalConfirmed) * 100;
        totalPercentage = totalPercentage.toFixed(2);


        if (country == "United States of America") {
            var wiki = country.replace(" ", "_");
            var wikiUrl = "https://en.wikipedia.org/wiki/COVID-19_pandemic_in_the_" + wiki;
        }

        else {

            var wiki = country.replace(" ", "_");
            var wikiUrl = "https://en.wikipedia.org/wiki/COVID-19_pandemic_in_" + wiki;
        }

        var read = "this".link(wikiUrl)
        var countryImage = "https://www.countryflags.io/" + code + "/flat/64.png";
        document.getElementById("image").src = countryImage;

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
        document.getElementById("tabs").style.display = "inline-block";



        let fatalityRate = (totalDeaths / totalConfirmed) * 100;
        fatalityRate = fatalityRate.toFixed(2);

            var data = new google.visualization.DataTable();
            data.addColumn('number', 'Total Confirmed Cases');
            data.addColumn('number', 'Total Deaths');
            data.addColumn('number', 'Total Recovered');
            data.addColumn('string', 'Total Cases per million');
            data.addColumn('string', 'Total Deaths per million');
            data.addColumn('string', 'Recovery Percentage');
            data.addColumn('string', 'Fatality Rate');


            data.addRows([
                [totalConfirmed, totalDeaths, totalRecovered, casespermillion, deathspermillion, totalPercentage + "%", fatalityRate + "%"],
            ]);

            var table = new google.visualization.Table(document.getElementById('table_div'));

            table.draw(data, { showRowNumber: false, width: '100%', height: '100%' });
        

        message = document.getElementById("myOutputPlace");
        message.innerHTML = "";
        message.innerHTML = "For more information on Covid-19 Pandemic in " + country + " visit " + read + " article";

    }
}

async function getDeaths() {
    document.getElementById('default').className = "tablinks";
    document.getElementById('third').className = "tablinks";
    document.getElementById('second').className = "tablinks active";
    var e = document.getElementById("country");
    var country = e.options[e.selectedIndex].text;
    var myDataArray = [["Date", "New Cases"]]
    try {

        var url = "https://api.covid19api.com/total/country/" + country + "/status/deaths"
        var totalCovidData = await fetch(url)
        var covid19 = await totalCovidData.json();
        myDataArray = [["Date", "New Deaths"]]
        totalDeaths = covid19[covid19.length - 1].Cases
        for (let i = 0; i < covid19.length; i++) {
            var date = covid19[i].Date
            date = date.substring(0, 10);
            if (i == 0) {
                var Deaths = covid19[0].Cases
                myDataArray.push([date, Deaths])
            }

            else {
                var Deaths = covid19[i].Cases - covid19[i - 1].Cases
                if (Deaths < 0) {
                    //pass
                }
                else {
                    myDataArray.push([date, Deaths])
                }
            }
        }
    }
    catch (err) {
        console.log(err)
    }


    if (myDataArray.length == 1) {
        //pass
    }

    else {

        var data = google.visualization.arrayToDataTable(myDataArray);
        var options = {
            title: 'Covid 19 Deaths for ' + country,
            legend: { position: 'bottom' },
            colors: ['#FF6347'],

        };


        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);

    }
}


async function getRecovered() {
    document.getElementById('default').className = "tablinks";
    document.getElementById('second').className = "tablinks";
    document.getElementById('third').className = "tablinks active";
    var e = document.getElementById("country");
    var country = e.options[e.selectedIndex].text;
    var myDataArray = [["Date", "New Cases"]]
    try {

        var url = "https://api.covid19api.com/total/country/" + country + "/status/recovered"
        var totalCovidData = await fetch(url)
        var covid19 = await totalCovidData.json();
        myDataArray = [["Date", "Recovered"]]
        totalDeaths = covid19[covid19.length - 1].Cases
        for (let i = 0; i < covid19.length; i++) {
            var date = covid19[i].Date
            date = date.substring(0, 10);
            if (i == 0) {
                var Deaths = covid19[0].Cases
                myDataArray.push([date, Deaths])
            }

            else {
                var Deaths = covid19[i].Cases - covid19[i - 1].Cases
                if (Deaths < 0) {
                    //pass
                }
                else {
                    myDataArray.push([date, Deaths])
                }
            }
        }
    }
    catch (err) {
        console.log(err)
    }


    if (myDataArray.length == 1) {
        //pass
    }

    else {

        var data = google.visualization.arrayToDataTable(myDataArray);
        var options = {
            title: 'Covid 19 Deaths for ' + country,
            legend: { position: 'bottom' },
            colors: ['#008000'],

        };


        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);

    }
}



    </script>
	<div style = "display: none" id= "countries">
		<embed id = "tweet" type="image/jpg" src="" width="300" height="200">
			</div>
			<div id="myOutputPlace">
	</div>
</body>
</html>